<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>空き教室・授業検索ツール</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
      background-color: #fff;
      color: #111;
      line-height: 1.6;
    }
    .container {
      max-width: 800px;
      margin: 80px auto;
      padding: 0 20px;
      text-align: center;
    }
    h2 {
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: 30px;
    }
    .controls {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 40px;
    }
    label{font-size: 20px;}
    select, button {
      padding: 12px 20px;
      font-size: 1rem;
      border: 1px solid #ccc;
      background: #fff;
      color: #111;
      border-radius: 6px;
      transition: border 0.3s;
    }
    select:focus, button:focus {
      outline: none;
      border-color: #0071e3;
    }
    button {
      background-color: #0071e3;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #005bb5;
    }
    #result {
      margin-top: 40px;
      font-size: 1.1rem;
      text-align: left;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }
    .edit-link {
      margin-top: 20px;
      display: block;
      color: #0071e3;
      text-decoration: none;
    }
    @media (max-width: 600px) {
      .controls {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>2025年前期 国際情報学部 空き教室・授業検索</h2>

    <div class="controls">
      <label>曜日：</label>
      <select id="day">
        <option value="月">月</option>
        <option value="火">火</option>
        <option value="水">水</option>
        <option value="木">木</option>
        <option value="金">金</option>
        <option value="土">土</option>
      </select>

      <label>時限：</label>
      <select id="period">
        <option value="1">1限</option>
        <option value="2">2限</option>
        <option value="3">3限</option>
        <option value="4">4限</option>
        <option value="5">5限</option>
        <option value="6">6限</option>
      </select>

      <button onclick="searchEmptyRooms()">空き教室検索</button>
      <button onclick="searchOccupiedRooms()">授業確認</button>
      <button onclick="checkConsecutiveAvailability()">連続空き教室表示</button>
    </div>
    <div id="result"></div>
    <a href="edit.html" class="edit-link">時間割を編集する</a>
  </div>
  <script>
    const allRooms = ["301", "401", "501", "502WS", "701", "702", "801", "802", "901", "902", "1001", "1002", "1003", "1004", "1101", "1102", "1103", "1104"];

    const defaultSchedule = {
  "301": {
    "月2": "統計学",
    "月4": "哲学Ⅱ/応用倫理学",
    "火1": "データサイエンス基礎",
    "火2": "データマイニングとAI",
    "火4": "国際文化論",
    "水2": "情報と憲法",
    "水4": "システムマネジメント",
    "木2": "情報政策概論",
    "木3": "情報倫理",
    "木4": "OSとハードウェア",
    "金2": "行政法(情報行政法)",
    "金3": "情報法",
    "金4": "ジャーナリズム論/特殊講義A2（ジャーナリズム論）",
    "金5": "健康・スポーツ",
    "土2": "メットビジネスとマネタイズ"
  },
  "401": {
    "土4": "FLP演習C（メディア・ジャーナリズム）",
    "月5": "広告論",
    "火1": "比較文明論",
    "火2": "刑事法(概論)",
    "火3": "刑事法(サイバー犯罪の刑事規制)",
    "火4": "法と経済学",
    "火5": "国際規約の起案学",
    "水2": "刑事法（デジタル・フォレンジック）",
    "水4": "特殊講義A4（情報法政策実務）",
    "水5": "特殊講義A3（eスポーツ）",
    "木3": "国際情報演習Ⅲ（村田）",
    "木4": "国際情報演習Ⅴ",
    "木5": "メディア論",
    "金1": "著作権実務",
    "金2": "電子商取引法",
    "金4": "情報社会学Ⅱ/情報心理学",
    "金5": "国際情報演習Ⅰ（村田）",
    "土2": "FLP演習A（メディア・ジャーナリズム）",
    "土3": "FLP演習B（メディア・ジャーナリズム）"
  },
  "501": {
    "火1": "法交渉学",
    "火4": "消費者保護法",
    "火5": "ICTケーススタディ（セキュリティインシデント）",
    "水1": "マクロ経済学/経済入門",
    "水2": "プロジェクトマネジメント",
    "水4": "文学",
    "水5": "各国ICT事情",
    "木2": "特殊講義B2（デジタルパブリッシング）",
    "木5": "パブリックコミュニケーション",
    "金2": "インターネット文化とサブカルチャー",
    "金4": "情報通信法",
    "金5": "情報技術論",
    "土2": "社会学/社会入門",
    "月3": "民事法(債権法総合)",
    "水3": "問題解決とアルゴリズム"
  },
  "701": {
    "月4": "国際情報演習Ⅲ（飯尾）",
    "月5": "国際情報演習Ⅴ（飯尾）",
    "火3": "プログラミング基礎(角田)",
    "火4": "情報と言語",
    "火5": "情報政策ワークショップ",
    "水2": "情報英語Ⅱ",
    "水4": "アカデミックイングリッシュⅡ",
    "水5": "Technical Writing",
    "木4": "物質科学",
    "木5": "企業の情報戦略とEA",
    "金5": "意思決定論",
    "土1": "プログラミング基礎",
    "月3": "国際情報演習Ⅰ（飯尾）",
    "水3": "統合英語Ⅱ（Plaza Taron Gary）"
  },
  "702": {
    "月5": "国際情報演習Ⅴ（吉田）",
    "火4": "国際情報演習Ⅴ",
    "木4": "物質科学",
    "木5": "AI・データサイエンス演習A,B,C(2)"
  },
  "801": {
    "月4": "国際情報演習Ⅲ（松崎）",
    "月5": "国際情報演習Ⅰ（松崎）",
    "火1": "統合英語Ⅱ",
    "火3": "国際情報演習Ⅴ（齋藤）",
    "火4": "特殊講義B5(ブロックチェーンとWeb3)",
    "火5": "国際情報演習Ⅰ（渡部）",
    "水2": "国際情報演習Ⅴ（松崎）",
    "水5": "ITILとサービスマネジメント",
    "木3": "国際情報概論Ⅴ（平野）",
    "木4": "国際情報演習Ⅲ（平野）",
    "木5": "国際情報演習Ⅰ（平野）",
    "金1": "情報英語Ⅱ",
    "金2": "統合英語Ⅱ",
    "金5": "デジタルブランディング",
    "水3": "プログラミング基礎"
  },
  "802": {
    "月4": "プログラミング基礎（小花）",
    "月5": "国際情報演習Ⅰ（小花）",
    "木5": "国際情報演習Ⅴ（須藤）",
    "水3": "国際情報演習Ⅲ（渡部）"
  },
  "901": {
    "月4": "情報英語Ⅱ",
    "火1": "統合英語Ⅱ",
    "火2": "情報英語Ⅱ",
    "火3": "プログラミング基礎(吉田)",
    "火4": "国際情報演習Ⅰ（吉田）",
    "火5": "国際情報演習Ⅲ(吉田)",
    "水4": "プログラミング基礎",
    "木1": "統合英語Ⅱ",
    "木2": "情報英語Ⅱ",
    "木3": "情報英語Ⅱ",
    "木4": "リスクコミュニケーション",
    "木5": "プログラミング基礎(横川)",
    "金1": "情報英語Ⅱ",
    "金2": "統合英語Ⅱ",
    "金3": "国際情報演習Ⅴ（矢島）",
    "金4": "国際情報演習Ⅲ（矢島）",
    "金5": "国際情報演習",
    "月3": "統合英語Ⅱ（丸岡）",
    "水3": "統合英語Ⅱ（Evans David Richard）"
  },
  "902": {
    "月2": "情報英語Ⅱ",
    "月4": "国際情報演習Ⅲ(橋本）",
    "月5": "国際情報演習Ⅰ（橋本）",
    "火4": "国際情報演習Ⅲ（小花）",
    "火5": "国際情報演習Ⅴ（小花）",
    "木4": "国際情報演習Ⅴ（保坂）",
    "木5": "プログラミング基礎(中村)",
    "金5": "情報判例研究C",
    "月3": "国際情報演習Ⅴ（橋本）"
  },
  "1001": {
    "火4": "国際情報演習Ⅴ（角田）",
    "木3": "国際情報演習Ⅴ（岩隈）",
    "木4": "国際情報演習Ⅲ（岩隈）",
    "木5": "国際情報演習Ⅰ（岩隈）"
  },
  "1002": {
    "木4": "国際情報演習Ⅲ（齋藤）",
    "木5": "国際情報演習Ⅰ（齋藤）"
  },
  "1003": {
    "火5": "国際情報演習Ⅴ（中島）",
    "木3": "国際情報演習Ⅴ（中村）",
    "木4": "国際情報演習Ⅲ（中村）",
    "木5": "国際情報演習Ⅰ（中村）"
  },
  "1004": {
    "木4": "ビジネスイングリッシュⅡ",
    "木5": "国際情報演習Ⅰ（原田）"
  },
  "1101": {
    "木3": "国際情報演習Ⅴ（小向）",
    "木4": "国際情報演習Ⅲ（小向）",
    "木5": "国際情報演習Ⅰ（小向）"
  },
  "1102": {
    "木4": "国際情報演習Ⅲ（石井）",
    "木5": "国際情報演習Ⅰ（石井）"
  },
  "1103": {
    "木4": "国際情報演習Ⅲ（中島）",
    "木5": "国際情報演習Ⅰ（中嶋）"
  },
  "1104": {
    "木5": "国際情報演習Ⅲ（保坂）"
  },
  "502WS": {
    "土4": "FLP演習B（メディア・ジャーナリズム）",
    "土5": "FLP演習C（メディア・ジャーナリズム）",
    "月4": "国際情報演習Ⅲ（岡嶋）",
    "月5": "国際情報演習Ⅰ（岡嶋）",
    "木3": "国際情報概論Ⅴ（松野）",
    "木4": "国際情報演習Ⅲ（松野）",
    "金3": "国際情報演習Ⅴ（岡嶋）",
    "金4": "映像絵制作基礎/現代視覚文化論",
    "土3": "FLP演習A（メディア・ジャーナリズム）"
  }
    };
    
    function getSchedule() {
      const stored = localStorage.getItem('scheduleData');
      return stored ? JSON.parse(stored) : defaultSchedule;
    }

    function searchEmptyRooms() {
      const schedule = getSchedule();
      const day = document.getElementById("day").value;
      const period = document.getElementById("period").value;
      const key = day + period;
      const empty = allRooms.filter(room => !(schedule[room] && schedule[room][key]));
      document.getElementById("result").innerHTML = `<h3>${key} の空き教室：</h3><ul>${empty.map(r => `<li>${r}</li>`).join("")}</ul>`;
    }

    function searchOccupiedRooms() {
      const schedule = getSchedule();
      const day = document.getElementById("day").value;
      const period = document.getElementById("period").value;
      const key = day + period;
      const occupied = allRooms
        .map(room => {
          const subj = schedule[room]?.[key];
          return subj ? `<li>${room}：${subj}</li>` : null;
        })
        .filter(Boolean);
      document.getElementById("result").innerHTML = `<h3>${key} に授業がある教室：</h3><ul>${occupied.join("")}</ul>`;
    }

    function checkConsecutiveAvailability() {
      const schedule = getSchedule();
      const day = document.getElementById("day").value;
      const maxPeriod = 6;
      const result = allRooms.map(room => {
        let start = null, end = null, consecutive = 0;
        for (let i = 1; i <= maxPeriod; i++) {
          const key = day + i;
          if (!schedule[room]?.[key]) {
            if (start === null) start = i;
            end = i;
            consecutive++;
          } else {
            if (consecutive > 0) break;
          }
        }
        return consecutive > 0 ? `<li>${room}：${start}限 ～ ${end}限 まで空き</li>` : null;
      }).filter(Boolean);
      document.getElementById("result").innerHTML = `<h3>${day}曜日の連続空き教室：</h3><ul>${result.join("")}</ul>`;
    }
  </script>
</body>
</html>
